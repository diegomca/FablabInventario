{"ast":null,"code":"import firebase from 'firebase';\nconst config = {\n  apiKey: \"AIzaSyApwjHjFIfP0VmtAqFH-Cp5Kha2GnD6q3E\",\n  authDomain: \"inventario-fablabuv.firebaseapp.com\",\n  databaseURL: \"https://inventario-fablabuv.firebaseio.com\",\n  projectId: \"inventario-fablabuv\",\n  storageBucket: \"inventario-fablabuv.appspot.com\",\n  messagingSenderId: \"1070405211534\",\n  appId: \"1:1070405211534:web:d7275629df2fb90bc900df\",\n  measurementId: \"G-PG0YWD8M1Z\"\n};\nconst firebaseConf = firebase.initializeApp(config);\nexport default firebaseConf;\nexport const getListaProducto = callback => {\n  const temp = [];\n  firebaseConf.database().ref().child(\"productos\").orderByChild(\"marca\").once(\"value\", snapshot => {\n    snapshot.forEach(datos => {\n      const data = {\n        codigo: datos.val().codigo,\n        marca: datos.val().marca,\n        modelo: datos.val().modelo,\n        stock: datos.val().stock,\n        disponible: datos.val().disponible,\n        ubicacion: datos.val().ubicacion,\n        key: datos.key\n      };\n      temp.push(data);\n    });\n    callback(temp);\n  });\n};\nexport const getListaRegistro = callback => {\n  const temp = [];\n  firebaseConf.firestore().collection('registros').orderBy('fecha').onSnapshot(querySnapshot => {\n    querySnapshot.forEach(data => {\n      temp.push(data.data());\n    });\n    callback(temp.reverse());\n  });\n};\nexport const setRegistro = (data_subir, callback) => {\n  firebaseConf.firestore().collection('registros').add(data_subir).then(() => {\n    callback(true);\n  }).catch(() => {\n    callback(false);\n  });\n};\nexport const updateProducto = (ruta, datos) => {\n  firebaseConf.database().ref().child('productos').child(String(ruta)).update({\n    \"disponible\": datos\n  }).then(() => {}).catch(() => {});\n};\nexport const updateProductoStock = (new_stock, new_disp, ruta) => {\n  firebaseConf.database().ref().child('productos').child(String(ruta)).update({\n    \"disponible\": new_disp,\n    \"stock\": new_stock\n  }).then(() => {}).catch(() => {});\n};\nexport const setProducto = (datos, callback) => {\n  firebaseConf.database().ref().child('productos').push(datos).then(() => callback(true)).catch(() => {\n    callback(false);\n  });\n};\nexport const removeProducto = ruta => {\n  firebaseConf.database().ref().child('productos').child(String(ruta)).remove();\n};\nexport const ingresarLogin = (userNick, userPassword, callback) => {\n  firebaseConf.auth().signInWithEmailAndPassword(userNick, userPassword).then(function (result) {\n    window.localStorage.setItem('token_inventarioUV', Math.random().toString(36).substr(2) + Math.random().toString(36).substr(2));\n    window.localStorage.setItem('user_inventarioUV', userNick);\n\n    if (userNick === 'admin@inventariofablab.uv.cl') {\n      window.localStorage.setItem('permisos_inventarioUV', '0');\n    }\n\n    if (userNick === 'visita@inventariofablab.uv.cl') {\n      window.localStorage.setItem('permisos_inventarioUV', '2');\n    }\n\n    if (userNick === 'ayudantes@inventariofablab.uv.cl') {\n      window.localStorage.setItem('permisos_inventarioUV', '1');\n    }\n\n    window.location = '/home';\n  }).catch(() => {\n    callback(false);\n  });\n};\nexport const getTipoRegistrovsCantidad = (ano, callback) => {\n  ano1 = \"2020\";\n  var query = new Array(5);\n  query[0] = firebaseConf.firestore().collection('registros').where(\"año\", \"==\", ano1).where('peticion', \"==\", \"Entrega de producto\");\n  query[1] = firebaseConf.firestore().collection('registros').where.where(\"año\", \"==\", ano1).where('peticion', \"==\", \"Devolucion de producto\");\n  query[2] = firebaseConf.firestore().collection('registros').where.where(\"año\", \"==\", ano1).where('peticion', \"==\", \"Actualizar stock\");\n  query[3] = firebaseConf.firestore().collection('registros').where.where(\"año\", \"==\", ano1).where('peticion', \"==\", \"Nuevo producto\");\n  query[4] = firebaseConf.firestore().collection('registros').where.where(\"año\", \"==\", ano1).where('peticion', \"==\", \"Producto removido\");\n  console.log(query);\n};","map":{"version":3,"sources":["/Users/diego/Documents/8_semestre/Taller-de-Aplicaciones/inventarioFablab/src/firebase.js"],"names":["firebase","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseConf","initializeApp","getListaProducto","callback","temp","database","ref","child","orderByChild","once","snapshot","forEach","datos","data","codigo","val","marca","modelo","stock","disponible","ubicacion","key","push","getListaRegistro","firestore","collection","orderBy","onSnapshot","querySnapshot","reverse","setRegistro","data_subir","add","then","catch","updateProducto","ruta","String","update","updateProductoStock","new_stock","new_disp","setProducto","removeProducto","remove","ingresarLogin","userNick","userPassword","auth","signInWithEmailAndPassword","result","window","localStorage","setItem","Math","random","toString","substr","location","getTipoRegistrovsCantidad","ano","ano1","query","Array","where","console","log"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\n\nconst config = {\n\n    apiKey: \"AIzaSyApwjHjFIfP0VmtAqFH-Cp5Kha2GnD6q3E\",\n    authDomain: \"inventario-fablabuv.firebaseapp.com\",\n    databaseURL: \"https://inventario-fablabuv.firebaseio.com\",\n    projectId: \"inventario-fablabuv\",\n    storageBucket: \"inventario-fablabuv.appspot.com\",\n    messagingSenderId: \"1070405211534\",\n    appId: \"1:1070405211534:web:d7275629df2fb90bc900df\",\n    measurementId: \"G-PG0YWD8M1Z\"\n\n}\n\nconst firebaseConf = firebase.initializeApp(config);\nexport default firebaseConf;\n\n\nexport const getListaProducto = (callback) => {\n    const temp = [];\n    firebaseConf.database().ref().child(\"productos\").orderByChild(\"marca\").once(\"value\", snapshot => {\n        snapshot.forEach(datos => {\n            const data = { codigo: datos.val().codigo, marca: datos.val().marca, modelo: datos.val().modelo, stock: datos.val().stock, disponible: datos.val().disponible, ubicacion: datos.val().ubicacion, key: datos.key }\n            temp.push(data);\n        })\n        callback(temp)\n    });\n};\n\nexport const getListaRegistro = (callback) => {\n    const temp = [];\n    firebaseConf.firestore().collection('registros').orderBy('fecha').onSnapshot(querySnapshot => {\n        querySnapshot.forEach(data => {\n            temp.push(data.data())\n        })\n        callback(temp.reverse());\n    })\n};\n\nexport const setRegistro = (data_subir, callback) => {\n    firebaseConf.firestore().collection('registros').add(data_subir).then(() => {\n        callback(true)\n    }).catch(() => {\n        callback(false)\n    })\n};\n\nexport const updateProducto = (ruta, datos) => {\n    firebaseConf.database().ref().child('productos').child(String(ruta)).update({\n        \"disponible\": datos\n    }).then(() => {\n    }).catch(() => {\n    })\n};\n\nexport const updateProductoStock = (new_stock, new_disp, ruta) => {\n    firebaseConf.database().ref().child('productos').child(String(ruta)).update({\n        \"disponible\": new_disp,\n        \"stock\": new_stock\n    }).then(() => {\n    }).catch(() => {\n    })\n};\n\nexport const setProducto = (datos, callback) => {\n\n    firebaseConf.database().ref().child('productos').push(datos).then(() => callback(true)).catch(() => { callback(false) })\n};\n\nexport const removeProducto = (ruta) => {\n\n    firebaseConf.database().ref().child('productos').child(String(ruta)).remove();\n};\n\nexport const ingresarLogin = (userNick, userPassword, callback) => {\n\n    firebaseConf.auth().signInWithEmailAndPassword(userNick, userPassword).then(function (result) {\n        window.localStorage.setItem('token_inventarioUV', Math.random().toString(36).substr(2) + Math.random().toString(36).substr(2));\n        window.localStorage.setItem('user_inventarioUV', userNick)\n        if (userNick === 'admin@inventariofablab.uv.cl') {\n            window.localStorage.setItem('permisos_inventarioUV', '0')\n        }\n        if (userNick === 'visita@inventariofablab.uv.cl') {\n            window.localStorage.setItem('permisos_inventarioUV', '2')\n        }\n        if (userNick === 'ayudantes@inventariofablab.uv.cl') {\n            window.localStorage.setItem('permisos_inventarioUV', '1')\n        }\n        window.location = '/home';\n    }).catch(() => {\n        callback(false)\n    })\n};\n\n\nexport const getTipoRegistrovsCantidad = (ano, callback) =>{\n    ano1=\"2020\"\n    var query = new Array(5);\n    query[0] = firebaseConf.firestore().collection('registros').where(\"año\", \"==\", ano1)\n        .where('peticion', \"==\", \"Entrega de producto\");\n    query[1] = firebaseConf.firestore().collection('registros').where.where(\"año\", \"==\", ano1)\n        .where('peticion', \"==\", \"Devolucion de producto\");\n    query[2] = firebaseConf.firestore().collection('registros').where.where(\"año\", \"==\", ano1)\n        .where('peticion', \"==\", \"Actualizar stock\");\n    query[3] = firebaseConf.firestore().collection('registros').where.where(\"año\", \"==\", ano1)\n        .where('peticion', \"==\", \"Nuevo producto\");\n    query[4] = firebaseConf.firestore().collection('registros').where.where(\"año\", \"==\", ano1)\n        .where('peticion', \"==\", \"Producto removido\");\n    console.log(query);\n\n}\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}