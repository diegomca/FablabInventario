{"ast":null,"code":"import _slicedToArray from \"/Users/diego/Documents/8_semestre/Taller-de-Aplicaciones/inventarioFablab/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/diego/Documents/8_semestre/Taller-de-Aplicaciones/inventarioFablab/src/registro/opciones/agregar/AgregarProducto.jsx\";\nimport React, { useState } from 'react';\nimport { Button, Form, Grid, Input, TextArea, Card, Progress, Loader } from 'semantic-ui-react';\nimport { setProducto, setRegistro, setArchivo } from '../../../firebase';\n\nfunction DevolucionProducto() {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        subiendoBandera = _useState2[0],\n        setsubiendoBandera = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        codigo = _useState4[0],\n        setCodigoUV = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        marca = _useState6[0],\n        setMarca = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        modelo = _useState8[0],\n        setModelo = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        stock = _useState10[0],\n        setStock = _useState10[1];\n\n  const _useState11 = useState(''),\n        _useState12 = _slicedToArray(_useState11, 2),\n        ubicacion = _useState12[0],\n        setUbicacion = _useState12[1];\n\n  const _useState13 = useState(''),\n        _useState14 = _slicedToArray(_useState13, 2),\n        detalle = _useState14[0],\n        setDetalle = _useState14[1];\n\n  const _useState15 = useState(null),\n        _useState16 = _slicedToArray(_useState15, 2),\n        file = _useState16[0],\n        setFile = _useState16[1];\n\n  const _useState17 = useState(null),\n        _useState18 = _slicedToArray(_useState17, 2),\n        nameFile = _useState18[0],\n        setNameFile = _useState18[1];\n\n  const _useState19 = useState(null),\n        _useState20 = _slicedToArray(_useState19, 2),\n        progreso = _useState20[0],\n        setProgreso = _useState20[1];\n\n  var url_subir = null;\n\n  const getFile = e => {\n    setFile(e.target.files[0]);\n    setNameFile(e.target.files[0].name);\n  };\n\n  const fileInputRef = React.createRef();\n\n  const handleSubmit = evt => {\n    if (codigo !== '' && marca !== '' && modelo !== '' && stock !== '' && ubicacion !== '') {\n      if (file !== null) {\n        setArchivo(file, nameFile, resp => {\n          url_subir = resp;\n        }, porcentaje => {\n          setProgreso(porcentaje);\n        }, bandera => {\n          if (bandera) {\n            let productSelect = {\n              codigo: Number(codigo),\n              disponible: Number(stock),\n              stock: Number(stock),\n              marca: marca,\n              modelo: modelo,\n              ubicacion: ubicacion,\n              historica_pedidos: 0\n            };\n            let productSelectLista = [{\n              codigo: Number(codigo),\n              stock: Number(stock),\n              marca: marca,\n              modelo: modelo,\n              ubicacion: ubicacion\n            }];\n            setProducto(productSelect, resp => {\n              if (resp) {\n                var fecha_date = new Date();\n                var ano = fecha_date.getFullYear();\n                let temp_subir = {\n                  encargado: \"Administrador\",\n                  peticion: \"Nuevo producto\",\n                  lista: productSelectLista,\n                  fecha: Date.now(),\n                  comentario: detalle,\n                  año: ano,\n                  mes: fecha_date.getMonth(),\n                  ruta_img: url_subir\n                };\n                setRegistro(temp_subir, resp => {\n                  if (resp) {\n                    window.location = '/registro';\n                  }\n                });\n              } else {\n                console.log(\"error\");\n              }\n            });\n          }\n        });\n      } else {\n        console.log(\"entro abajo\");\n        let productSelect = {\n          codigo: Number(codigo),\n          disponible: Number(stock),\n          stock: Number(stock),\n          marca: marca,\n          modelo: modelo,\n          ubicacion: ubicacion,\n          historica_pedidos: 0\n        };\n        let productSelectLista = [{\n          codigo: Number(codigo),\n          stock: Number(stock),\n          marca: marca,\n          modelo: modelo,\n          ubicacion: ubicacion\n        }];\n        setProducto(productSelect, resp => {\n          if (resp) {\n            var fecha_date = new Date();\n            var ano = fecha_date.getFullYear();\n            let temp_subir = {\n              encargado: \"Administrador\",\n              peticion: \"Nuevo producto\",\n              lista: productSelectLista,\n              fecha: Date.now(),\n              comentario: detalle,\n              año: ano,\n              mes: fecha_date.getMonth(),\n              ruta_img: url_subir\n            };\n            setRegistro(temp_subir, resp => {\n              if (resp) {\n                window.location = '/registro';\n              }\n            });\n          } else {\n            console.log(\"error\");\n          }\n        });\n      }\n    } else {\n      alert(\"Error en los datos, todos los datos son obligatorios y debe seleccionar productos obligatoriamente\");\n    }\n  };\n\n  return React.createElement(Card, {\n    fluid: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Card.Content, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    columns: \"three\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Grid.Column, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"number\",\n    placeholder: \"Codigo\",\n    fluid: true,\n    onChange: e => setCodigoUV(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), React.createElement(Grid.Column, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(Input, {\n    placeholder: \"Marca\",\n    fluid: true,\n    onChange: e => setMarca(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })), React.createElement(Grid.Column, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Input, {\n    placeholder: \"Modelo\",\n    fluid: true,\n    onChange: e => setModelo(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }))), React.createElement(Grid, {\n    columns: \"three\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(Grid.Column, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"number\",\n    placeholder: \"Stock Total\",\n    fluid: true,\n    onChange: e => setStock(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  })), React.createElement(Grid.Column, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Input, {\n    placeholder: \"Ubicaci\\xF3n\",\n    fluid: true,\n    onChange: e => setUbicacion(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  })), React.createElement(Grid.Column, {\n    width: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(Button, {\n    icon: \"upload\",\n    onClick: () => fileInputRef.current.click(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    ref: fileInputRef,\n    type: \"file\",\n    hidden: true,\n    onChange: getFile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), progreso !== null && React.createElement(Grid.Column, {\n    width: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Progress, {\n    percent: progreso,\n    indicating: true,\n    size: \"medium\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  })))), React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(Card.Content, {\n    extra: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(TextArea, {\n    name: \"detalle\",\n    placeholder: \"Descripci\\xF3n del producto\",\n    onChange: e => setDetalle(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }), !subiendoBandera ? React.createElement(Button, {\n    color: \"facebook\",\n    type: \"submit\",\n    size: \"medium\",\n    onClick: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Agregar\") : React.createElement(Loader, {\n    active: true,\n    inline: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }))));\n}\n\nexport default DevolucionProducto;","map":{"version":3,"sources":["/Users/diego/Documents/8_semestre/Taller-de-Aplicaciones/inventarioFablab/src/registro/opciones/agregar/AgregarProducto.jsx"],"names":["React","useState","Button","Form","Grid","Input","TextArea","Card","Progress","Loader","setProducto","setRegistro","setArchivo","DevolucionProducto","subiendoBandera","setsubiendoBandera","codigo","setCodigoUV","marca","setMarca","modelo","setModelo","stock","setStock","ubicacion","setUbicacion","detalle","setDetalle","file","setFile","nameFile","setNameFile","progreso","setProgreso","url_subir","getFile","e","target","files","name","fileInputRef","createRef","handleSubmit","evt","resp","porcentaje","bandera","productSelect","Number","disponible","historica_pedidos","productSelectLista","fecha_date","Date","ano","getFullYear","temp_subir","encargado","peticion","lista","fecha","now","comentario","año","mes","getMonth","ruta_img","window","location","console","log","alert","value","current","click"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Button, Form, Grid, Input, TextArea, Card, Progress, Loader } from 'semantic-ui-react';\r\nimport { setProducto, setRegistro, setArchivo } from '../../../firebase';\r\n\r\n\r\nfunction DevolucionProducto() {\r\n\r\n    const [subiendoBandera, setsubiendoBandera] = useState(false)\r\n\r\n    const [codigo, setCodigoUV] = useState('');\r\n    const [marca, setMarca] = useState('');\r\n    const [modelo, setModelo] = useState('');\r\n    const [stock, setStock] = useState('');\r\n    const [ubicacion, setUbicacion] = useState('');\r\n    const [detalle, setDetalle] = useState('');\r\n\r\n    const [file, setFile] = useState(null);\r\n    const [nameFile, setNameFile] = useState(null);\r\n    const [progreso, setProgreso] = useState(null)\r\n\r\n    var url_subir = null;\r\n\r\n    const getFile = e => {\r\n        setFile(e.target.files[0])\r\n        setNameFile(e.target.files[0].name)\r\n    }\r\n\r\n    const fileInputRef = React.createRef();\r\n\r\n    const handleSubmit = (evt) => {\r\n\r\n        if (codigo !== '' && marca !== '' && modelo !== '' && stock !== '' && ubicacion !== '') {\r\n\r\n            if (file !== null) {\r\n                setArchivo(file, nameFile, (resp) => {\r\n                    url_subir = resp\r\n                }, (porcentaje) => {\r\n                    setProgreso(porcentaje)\r\n                }, bandera => {\r\n                    if (bandera) {\r\n                        let productSelect = { codigo: Number(codigo), disponible: Number(stock), stock: Number(stock), marca: marca, modelo: modelo, ubicacion: ubicacion, historica_pedidos: 0 }\r\n                        let productSelectLista = [{ codigo: Number(codigo), stock: Number(stock), marca: marca, modelo: modelo, ubicacion: ubicacion }]\r\n\r\n                        setProducto(productSelect, (resp) => {\r\n                            if (resp) {\r\n                                var fecha_date = new Date();\r\n                                var ano = fecha_date.getFullYear();\r\n                                let temp_subir = { encargado: \"Administrador\", peticion: \"Nuevo producto\", lista: productSelectLista, fecha: Date.now(), comentario: detalle, año: ano, mes: fecha_date.getMonth(), ruta_img: url_subir }\r\n\r\n                                setRegistro(temp_subir, (resp) => {\r\n                                    if (resp) {\r\n                                        window.location = '/registro'\r\n                                    }\r\n                                })\r\n                            } else {\r\n                                console.log(\"error\")\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            } else {\r\n                console.log(\"entro abajo\")\r\n                let productSelect = { codigo: Number(codigo), disponible: Number(stock), stock: Number(stock), marca: marca, modelo: modelo, ubicacion: ubicacion, historica_pedidos: 0 }\r\n                let productSelectLista = [{ codigo: Number(codigo), stock: Number(stock), marca: marca, modelo: modelo, ubicacion: ubicacion }]\r\n\r\n                setProducto(productSelect, (resp) => {\r\n                    if (resp) {\r\n                        var fecha_date = new Date();\r\n                        var ano = fecha_date.getFullYear();\r\n                        let temp_subir = { encargado: \"Administrador\", peticion: \"Nuevo producto\", lista: productSelectLista, fecha: Date.now(), comentario: detalle, año: ano, mes: fecha_date.getMonth(), ruta_img: url_subir }\r\n\r\n                        setRegistro(temp_subir, (resp) => {\r\n                            if (resp) {\r\n                                window.location = '/registro'\r\n                            }\r\n                        })\r\n                    } else {\r\n                        console.log(\"error\")\r\n                    }\r\n                })\r\n            }\r\n        } else {\r\n            alert(`Error en los datos, todos los datos son obligatorios y debe seleccionar productos obligatoriamente`)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Card fluid>\r\n            <Card.Content>\r\n                <Grid columns=\"three\">\r\n                    <Grid.Column>\r\n                        <Input type=\"number\" placeholder=\"Codigo\" fluid onChange={e => setCodigoUV(e.target.value)}></Input>\r\n                    </Grid.Column>\r\n                    <Grid.Column>\r\n                        <Input placeholder=\"Marca\" fluid onChange={e => setMarca(e.target.value)} ></Input>\r\n                    </Grid.Column>\r\n                    <Grid.Column>\r\n                        <Input placeholder=\"Modelo\" fluid onChange={e => setModelo(e.target.value)} ></Input>\r\n                    </Grid.Column>\r\n                </Grid>\r\n                <Grid columns=\"three\">\r\n                    <Grid.Column>\r\n                        <Input type=\"number\" placeholder=\"Stock Total\" fluid onChange={e => setStock(e.target.value)}></Input>\r\n                    </Grid.Column>\r\n                    <Grid.Column>\r\n                        <Input placeholder=\"Ubicación\" fluid onChange={e => setUbicacion(e.target.value)} ></Input>\r\n                    </Grid.Column>\r\n                    <Grid.Column width={1} >\r\n                        <Button icon=\"upload\" onClick={() => fileInputRef.current.click()} />\r\n                        <input ref={fileInputRef} type=\"file\" hidden onChange={getFile} />\r\n                    </Grid.Column>\r\n                    {\r\n                        progreso !== null &&\r\n                        <Grid.Column width={1} >\r\n                            <Progress percent={progreso} indicating size=\"medium\" />\r\n                        </Grid.Column>\r\n                    }\r\n                </Grid>\r\n            </Card.Content>\r\n            <Form>\r\n                <Card.Content extra>\r\n                    <TextArea name=\"detalle\" placeholder='Descripción del producto' onChange={e => setDetalle(e.target.value)} />\r\n                    {\r\n                        !subiendoBandera ?\r\n                        <Button color=\"facebook\" type=\"submit\" size=\"medium\" onClick={handleSubmit} >\r\n                            Agregar\r\n                        </Button>\r\n                        :\r\n                            <Loader active inline />\r\n                    }\r\n\r\n                </Card.Content>\r\n            </Form>\r\n        </Card>\r\n    );\r\n}\r\nexport default DevolucionProducto;"]},"metadata":{},"sourceType":"module"}