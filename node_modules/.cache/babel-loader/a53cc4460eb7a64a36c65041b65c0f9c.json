{"ast":null,"code":"import _slicedToArray from \"/Users/diego/Documents/8_semestre/Taller-de-Aplicaciones/inventarioFablab/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/diego/Documents/8_semestre/Taller-de-Aplicaciones/inventarioFablab/src/registro/opciones/entrega/EntregaProducto.jsx\";\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { Button, Form, Grid, Input, TextArea, Card, Modal, Header, Table, Icon } from 'semantic-ui-react';\nimport Productselect from './ProductSelect';\nimport { UserContext } from \"../UseContext\";\nimport { getListaAnalisis, setRegistro, updateProducto } from '../../../firebase';\n\nfunction EntregaProducto() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        productSelect = _useState2[0],\n        setProductSelect = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        productos = _useState4[0],\n        setProductos = _useState4[1];\n\n  const _useState5 = useState(true),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isShowingModal = _useState6[0],\n        setIsShowingModal = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        isClose = _useState8[0],\n        setIsclose = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        encargado = _useState10[0],\n        setEncargado = _useState10[1];\n\n  const _useState11 = useState(\"\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        descripcion = _useState12[0],\n        setDescripcion = _useState12[1];\n\n  const _useState13 = useState(''),\n        _useState14 = _slicedToArray(_useState13, 2),\n        file = _useState14[0],\n        setFile = _useState14[1];\n\n  const _useState15 = useState(''),\n        _useState16 = _slicedToArray(_useState15, 2),\n        nameFile = _useState16[0],\n        setNameFile = _useState16[1];\n\n  const providerValue = useMemo(() => ({\n    productSelect,\n    setProductSelect\n  }), [productSelect, setProductSelect]);\n  const fileInputRef = React.createRef();\n  useEffect(() => {\n    (async function () {\n      try {\n        getListaAnalisis(response => {\n          setProductos(response);\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    })(); // eslint-disable-next-line\n\n  }, []);\n\n  const getFile = e => {\n    setFile(e.target.files[0]);\n    setNameFile(e.target.files[0].name);\n  };\n\n  const confirmarPedido = evt => {\n    if (productSelect.length > 0) {\n      setIsShowingModal(!isShowingModal);\n      setIsclose(!isClose);\n    }\n  };\n\n  const handleSubmit = evt => {\n    var bandera = false;\n\n    if (encargado !== \"\" && productSelect.length >= 1) {\n      productSelect.map(productos => {\n        let disponible = Number(productos.stock) - Number(productos.cantidad);\n        let temp_data = {\n          codigo: productos.id,\n          marca: productos.marca,\n          modelo: productos.modelo,\n          ubicacion: productos.ubicacion,\n          disponible: disponible\n        };\n        console.log(temp_data);\n        updateProducto(productos.ruta, disponible, respuesta => {\n          if (respuesta) {\n            bandera = true;\n          } else {\n            bandera = false;\n            console.log(\"no subidos\");\n          }\n        });\n      });\n\n      if (bandera) {\n        let temp_subir = {\n          encargado: encargado,\n          peticion: \"Entrega de producto\",\n          archivo: \"archivo.qlio\",\n          lista: \"aun falta\",\n          fecha: Date.now(),\n          comentario: descripcion\n        };\n        setRegistro(temp_subir, resp => {\n          if (resp) {\n            window.location = '/registro';\n          }\n        });\n      } else {\n        console.log(\"no subidos los datos\");\n      }\n    } else {\n      alert(\"Error en los datos, todos los datos son obligatorios y debe seleccionar productos obligatoriamente\");\n    }\n  };\n\n  return React.createElement(UserContext.Provider, {\n    value: providerValue,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(Card, {\n    fluid: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(Card.Content, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    columns: \"equal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Grid.Column, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, isShowingModal ? React.createElement(Modal, {\n    open: isClose,\n    trigger: React.createElement(Button, {\n      onClick: e => setIsclose(!isClose),\n      fluid: true,\n      color: \"youtube\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \" Lista de Productos\"),\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Entrega de Producto\"), React.createElement(Modal.Content, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Modal.Description, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Lista de Productos\"), React.createElement(Table, {\n    celled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Table.Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Table.Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Marca \"), React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Modelo \"), React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Articulos Disponibles\"), React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Cantidad\"), React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Seleccionar\"))), React.createElement(Table.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, productos.map((producto, index) => {\n    const disponible = producto.disponible,\n          marca = producto.marca,\n          modelo = producto.modelo,\n          codigo = producto.codigo,\n          ubicacion = producto.ubicacion,\n          stock = producto.stock,\n          key = producto.key;\n    return React.createElement(Productselect, {\n      key: index,\n      ubicacion: ubicacion,\n      total: stock,\n      marca: marca,\n      modelo: modelo,\n      stock: disponible,\n      id: codigo,\n      ruta: key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    });\n  }))), productSelect.length > 0 ? React.createElement(Button, {\n    className: \"close\",\n    onClick: e => confirmarPedido(),\n    color: \"vk\",\n    circular: true,\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Confirmar \", React.createElement(Icon, {\n    name: \"chevron right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(Button, {\n    className: \"close\",\n    onClick: e => {\n      setIsclose(!isClose);\n      setProductSelect([]);\n    },\n    color: \"red\",\n    circular: true,\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Salir \"))))) : React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(Modal, {\n    trigger: React.createElement(Button, {\n      circular: true,\n      color: \"blue\",\n      attached: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Ver Articulos\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(Modal.Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Elementos seleccionados para entrega\"), React.createElement(Modal.Content, {\n    scrolling: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(Modal.Description, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(Table, {\n    singleLine: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(Table.Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(Table.Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"Marca\"), React.createElement(Table.HeaderCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"Modelo\"), React.createElement(Table.HeaderCell, {\n    textAlign: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, \"Disponibilidad\"), React.createElement(Table.HeaderCell, {\n    textAlign: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Cantidad Pedida\"))), React.createElement(Table.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, productSelect.map((item, index) => {\n    const marca = item.marca,\n          modelo = item.modelo,\n          stock = item.stock,\n          cantidad = item.cantidad;\n    return React.createElement(Table.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, marca), React.createElement(Table.Cell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, modelo), React.createElement(Table.Cell, {\n      textAlign: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, stock), React.createElement(Table.Cell, {\n      textAlign: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, cantidad));\n  })))))), React.createElement(Button, {\n    onClick: e => {\n      setIsShowingModal(!isShowingModal);\n      setProductSelect([]);\n    },\n    color: \"red\",\n    circular: true,\n    attached: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Eliminar Articulos\"))), React.createElement(Grid.Column, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(Input, {\n    fluid: true,\n    name: \"encargado\",\n    placeholder: \"Encargado\",\n    onChange: e => setEncargado(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  })), React.createElement(Grid.Column, {\n    width: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, React.createElement(Button, {\n    icon: \"upload\",\n    onClick: () => fileInputRef.current.click(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    ref: fileInputRef,\n    type: \"file\",\n    hidden: true,\n    onChange: getFile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }), nameFile))), React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, React.createElement(Card.Content, {\n    extra: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(TextArea, {\n    name: \"detalle\",\n    placeholder: \"Detalle\",\n    onChange: e => setDescripcion(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }), React.createElement(Button, {\n    color: \"facebook\",\n    type: \"submit\",\n    size: \"medium\",\n    onClick: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"Agregar\")))));\n}\n\nexport default EntregaProducto;","map":{"version":3,"sources":["/Users/diego/Documents/8_semestre/Taller-de-Aplicaciones/inventarioFablab/src/registro/opciones/entrega/EntregaProducto.jsx"],"names":["React","useState","useMemo","useEffect","Button","Form","Grid","Input","TextArea","Card","Modal","Header","Table","Icon","Productselect","UserContext","getListaAnalisis","setRegistro","updateProducto","EntregaProducto","productSelect","setProductSelect","productos","setProductos","isShowingModal","setIsShowingModal","isClose","setIsclose","encargado","setEncargado","descripcion","setDescripcion","file","setFile","nameFile","setNameFile","providerValue","fileInputRef","createRef","response","e","console","error","getFile","target","files","name","confirmarPedido","evt","length","handleSubmit","bandera","map","disponible","Number","stock","cantidad","temp_data","codigo","id","marca","modelo","ubicacion","log","ruta","respuesta","temp_subir","peticion","archivo","lista","fecha","Date","now","comentario","resp","window","location","alert","producto","index","key","textAlign","item","value","current","click"],"mappings":"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","sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\nimport { Button, Form, Grid, Input, TextArea, Card, Modal, Header, Table, Icon } from 'semantic-ui-react';\nimport Productselect from './ProductSelect'\nimport { UserContext } from \"../UseContext\";\nimport { getListaAnalisis, setRegistro, updateProducto } from '../../../firebase';\n\nfunction EntregaProducto() {\n\n    const [productSelect, setProductSelect] = useState([]);\n    const [productos, setProductos] = useState([])\n\n    const [isShowingModal, setIsShowingModal] = useState(true);\n    const [isClose, setIsclose] = useState(false);\n    const [encargado, setEncargado] = useState(\"\");\n    const [descripcion, setDescripcion] = useState(\"\");\n    const [file, setFile] = useState('');\n    const [nameFile, setNameFile] = useState('');\n    const providerValue = useMemo(() => ({ productSelect, setProductSelect }), [productSelect, setProductSelect]);\n    const fileInputRef = React.createRef();\n\n\n        useEffect(() => {\n            (async function () {\n                try {\n                    getListaAnalisis((response) => {\n                        setProductos(response);\n                    });\n                } catch (e) {\n                    console.error(e);\n                }\n            })();// eslint-disable-next-line\n        }, []);\n\n    const getFile = e => {\n        setFile(e.target.files[0])\n        setNameFile(e.target.files[0].name)\n    }\n    const confirmarPedido = (evt) => {\n\n        if (productSelect.length > 0) {\n            setIsShowingModal(!isShowingModal);\n            setIsclose(!isClose);\n        }\n    }\n    const handleSubmit = (evt) => {\n            var bandera = false;\n        if (encargado !== \"\" && productSelect.length >= 1) {\n\n            productSelect.map((productos) => {\n                let disponible = Number(productos.stock) - Number(productos.cantidad);\n                let temp_data = { codigo: productos.id, marca: productos.marca, modelo: productos.modelo, ubicacion: productos.ubicacion, disponible: disponible}\n                console.log(temp_data)\n                updateProducto( productos.ruta, disponible, (respuesta) => {\n                    if (respuesta) {\n                        bandera = true;\n                    }else{\n                        bandera = false;\n                        console.log(\"no subidos\")\n                    }\n                })\n            })\n            if (bandera) {\n                let temp_subir = { encargado: encargado, peticion: \"Entrega de producto\", archivo: \"archivo.qlio\", lista: \"aun falta\", fecha: Date.now(), comentario: descripcion }\n                setRegistro(temp_subir, (resp) => {\n                    if (resp) {\n                        window.location = '/registro'\n                    }\n                })\n            }else{\n                console.log(\"no subidos los datos\")\n            }\n        }else{\n            alert(`Error en los datos, todos los datos son obligatorios y debe seleccionar productos obligatoriamente`)\n        }\n    }\n    \n    return (\n        <UserContext.Provider value={providerValue}>\n            <Card fluid>\n                <Card.Content>\n                    <Grid columns=\"equal\">\n                        <Grid.Column>\n                            {isShowingModal ?\n                                < Modal open={isClose} trigger={< Button onClick={e => setIsclose(!isClose)} fluid color=\"youtube\" > Lista de Productos</Button >} size=\"small\" >\n                                    <Modal.Header>Entrega de Producto</Modal.Header>\n                                    <Modal.Content >\n                                        <Modal.Description>\n                                            <Form>\n                                                <Header>Lista de Productos</Header>\n                                                <Table celled>\n                                                    <Table.Header>\n                                                        <Table.Row>\n                                                            <Table.HeaderCell>Marca </Table.HeaderCell>\n                                                            <Table.HeaderCell>Modelo </Table.HeaderCell>\n                                                            <Table.HeaderCell>Articulos Disponibles</Table.HeaderCell>\n                                                            <Table.HeaderCell>Cantidad</Table.HeaderCell>\n                                                            <Table.HeaderCell>Seleccionar</Table.HeaderCell>\n                                                        </Table.Row>\n                                                    </Table.Header>\n                                                    <Table.Body>\n                                                        {productos.map((producto, index) => {\n                                                            const { disponible, marca, modelo, codigo, ubicacion, stock, key } = producto\n                                                            return (\n                                                                <Productselect key={index} ubicacion={ubicacion} total={stock} marca={marca} modelo={modelo} stock={disponible} id={codigo} ruta={key} ></Productselect>\n                                                            )\n                                                        })}\n                                                    </Table.Body>\n                                                </Table>\n                                                {productSelect.length > 0 ? <Button className=\"close\" onClick={e => confirmarPedido()} color=\"vk\" circular type=\"submit\" >\n                                                    Confirmar <Icon name='chevron right' /></Button> : <div />}\n                                                <Button className=\"close\" onClick={e => { setIsclose(!isClose); setProductSelect([]) }} color=\"red\" circular type=\"submit\" >\n                                                    Salir </Button>\n                                            </Form>\n                                        </Modal.Description>\n                                    </Modal.Content>\n                                </Modal >\n                                :\n                                <div style={{ textAlign: \"center\" }} >\n\n                                    <Modal trigger={<Button circular color=\"blue\" attached='left'>Ver Articulos</Button>} >\n                                        <Modal.Header>Elementos seleccionados para entrega</Modal.Header>\n                                        <Modal.Content scrolling>\n                                            <Modal.Description>\n                                                <Table singleLine>\n                                                    <Table.Header>\n                                                        <Table.Row>\n                                                            <Table.HeaderCell >Marca</Table.HeaderCell>\n                                                            <Table.HeaderCell >Modelo</Table.HeaderCell>\n                                                            <Table.HeaderCell textAlign='center'>Disponibilidad</Table.HeaderCell>\n                                                            <Table.HeaderCell textAlign='center'>Cantidad Pedida</Table.HeaderCell>\n                                                        </Table.Row>\n                                                    </Table.Header>\n                                                    <Table.Body>\n                                                        {productSelect.map((item, index) => {\n                                                            const { marca, modelo, stock, cantidad } = item\n                                                            return (\n                                                                <Table.Row>\n                                                                    <Table.Cell>{marca}</Table.Cell>\n                                                                    <Table.Cell>{modelo}</Table.Cell>\n                                                                    <Table.Cell textAlign='center' >{stock}</Table.Cell>\n                                                                    <Table.Cell textAlign='center' >{cantidad}</Table.Cell>\n                                                                </Table.Row>\n                                                            )\n                                                        })\n                                                        }\n                                                    </Table.Body>\n                                                </Table>\n                                            </Modal.Description>\n                                        </Modal.Content>\n                                    </Modal>\n                                    <Button onClick={e => { setIsShowingModal(!isShowingModal); setProductSelect([]); }} color=\"red\" circular attached='right'>Eliminar Articulos</Button>\n                                </div>\n                            }\n                        </Grid.Column>\n                        <Grid.Column>\n                            <Input fluid name=\"encargado\" placeholder=\"Encargado\" onChange={e => setEncargado(e.target.value)} />\n                        </Grid.Column>\n\n                        <Grid.Column width={1}>\n                            <Button icon=\"upload\" onClick={() => fileInputRef.current.click()} />\n                            <input ref={fileInputRef} type=\"file\" hidden onChange={getFile} />\n                            {nameFile}\n                        </Grid.Column>\n                    </Grid>\n                </Card.Content>\n                <Form>\n                    <Card.Content extra>\n                        <TextArea name=\"detalle\" placeholder='Detalle' onChange={e => setDescripcion(e.target.value)} />\n                        <Button color=\"facebook\" type=\"submit\" size=\"medium\" onClick={handleSubmit} >\n                            Agregar\n                        </Button>\n                    </Card.Content>\n                </Form>\n            </Card>\n        </UserContext.Provider>\n    );\n}\nexport default EntregaProducto;"]},"metadata":{},"sourceType":"module"}